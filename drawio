<mxfile host="app.diagrams.net" modified="2025-01-12T00:00:00.000Z" agent="5.0" version="24.0.0" etag="xxx" type="device">
  <diagram name="Architecture LangGraph MLflow" id="architecture">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Titre -->
        <mxCell id="title" value="Architecture LangGraph + MLflow sur AWS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="600" height="40" as="geometry" />
        </mxCell>
        
        <!-- AWS Cloud -->
        <mxCell id="aws_cloud" value="" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_aws_cloud;strokeColor=#AAB7B8;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#AAB7B8;dashed=0;" vertex="1" parent="1">
          <mxGeometry x="80" y="100" width="1240" height="740" as="geometry" />
        </mxCell>
        
        <!-- SageMaker Studio / Notebook -->
        <mxCell id="sagemaker_group" value="SageMaker Studio / Notebook Instance" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;verticalAlign=top;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="120" y="160" width="560" height="420" as="geometry" />
        </mxCell>
        
        <!-- Jupyter Notebook -->
        <mxCell id="notebook" value="Jupyter Notebook&#xa;(Python Code)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="160" y="220" width="160" height="80" as="geometry" />
        </mxCell>
        
        <!-- LangChain Components -->
        <mxCell id="langchain_box" value="LangChain Components" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;verticalAlign=top;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="360" y="220" width="280" height="340" as="geometry" />
        </mxCell>
        
        <!-- ChatBedrockConverse -->
        <mxCell id="bedrock_llm" value="ChatBedrockConverse&#xa;(LLM Interface)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="380" y="260" width="240" height="60" as="geometry" />
        </mxCell>
        
        <!-- LangGraph -->
        <mxCell id="langgraph" value="LangGraph&#xa;(State Machine)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="380" y="340" width="240" height="60" as="geometry" />
        </mxCell>
        
        <!-- Nodes -->
        <mxCell id="node1" value="Node: Analyze" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="390" y="420" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="node2" value="Node: Answer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="510" y="420" width="100" height="40" as="geometry" />
        </mxCell>
        
        <!-- Prompts -->
        <mxCell id="prompts" value="ChatPromptTemplate&#xa;(System + User)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="380" y="480" width="240" height="60" as="geometry" />
        </mxCell>
        
        <!-- MLflow Tracking -->
        <mxCell id="mlflow_tracking" value="MLflow Tracking&#xa;(Logging Layer)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="160" y="340" width="160" height="80" as="geometry" />
        </mxCell>
        
        <!-- Arrows inside SageMaker -->
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="notebook" target="langgraph">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow1_label" value="invoke()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontStyle=1" vertex="1" connectable="0" parent="arrow1">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint x="5" y="-9" as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;" edge="1" parent="1" source="langgraph" target="bedrock_llm">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow2_label" value="uses" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="arrow2">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint x="-1" y="5" as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#d79b00;" edge="1" parent="1" source="langgraph" target="mlflow_tracking">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow3_label" value="log_param()&#xa;log_metric()&#xa;log_artifact()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontStyle=1;fillColor=#ffe6cc;" vertex="1" connectable="0" parent="arrow3">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint y="-20" as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- AWS Bedrock -->
        <mxCell id="bedrock_service" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#01A88D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.bedrock;" vertex="1" parent="1">
          <mxGeometry x="780" y="240" width="78" height="78" as="geometry" />
        </mxCell>
        
        <mxCell id="bedrock_label" value="AWS Bedrock&#xa;(Claude 3 Sonnet)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="759" y="330" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow_bedrock" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#01A88D;" edge="1" parent="1" source="bedrock_llm" target="bedrock_service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow_bedrock_label" value="API Calls&#xa;(boto3)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontStyle=1;fillColor=#d5e8d4;" vertex="1" connectable="0" parent="arrow_bedrock">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint y="-15" as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- MLflow Tracking Server -->
        <mxCell id="mlflow_server_box" value="MLflow Tracking Server" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;verticalAlign=top;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="780" y="420" width="480" height="380" as="geometry" />
        </mxCell>
        
        <!-- SageMaker MLflow -->
        <mxCell id="sagemaker_mlflow" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.sagemaker_model;" vertex="1" parent="1">
          <mxGeometry x="820" y="480" width="78" height="78" as="geometry" />
        </mxCell>
        
        <mxCell id="mlflow_server_label" value="SageMaker MLflow&#xa;Tracking Server" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="799" y="570" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- S3 Bucket -->
        <mxCell id="s3_bucket" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#7AA116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.bucket;" vertex="1" parent="1">
          <mxGeometry x="980" y="480" width="75" height="78" as="geometry" />
        </mxCell>
        
        <mxCell id="s3_label" value="S3 Bucket&#xa;(Artifacts Storage)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="957.5" y="570" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- RDS -->
        <mxCell id="rds" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#C925D1;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.rds_instance;" vertex="1" parent="1">
          <mxGeometry x="1140" y="480" width="78" height="78" as="geometry" />
        </mxCell>
        
        <mxCell id="rds_label" value="RDS / PostgreSQL&#xa;(Metadata Store)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1119" y="570" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- Stored Data -->
        <mxCell id="stored_data" value="Données Stockées dans MLflow" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;verticalAlign=top;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="820" y="650" width="400" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="data_list" value="• Paramètres (model_id, temperature, question)&#xa;• Métriques (latency_s, answer_length)&#xa;• Artifacts (traces JSON, résultats)&#xa;• Tags (status, graph_type)&#xa;• Request IDs et exécutions" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="830" y="680" width="380" height="80" as="geometry" />
        </mxCell>
        
        <!-- Arrow MLflow -->
        <mxCell id="arrow_mlflow" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#d79b00;" edge="1" parent="1" source="mlflow_tracking" target="sagemaker_mlflow">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="400" y="380" />
              <mxPoint x="400" y="519" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow_mlflow_label" value="HTTP POST&#xa;(Tracking API)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontStyle=1;fillColor=#ffe6cc;" vertex="1" connectable="0" parent="arrow_mlflow">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint x="80" y="-15" as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Arrows inside MLflow Server -->
        <mxCell id="arrow_s3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;" edge="1" parent="1" source="sagemaker_mlflow" target="s3_bucket">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow_s3_label" value="artifacts" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="arrow_s3">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint y="-10" as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow_rds" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;" edge="1" parent="1" source="s3_bucket" target="rds">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow_rds_label" value="metadata" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="arrow_rds">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint y="-10" as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- User/Data Scientist -->
        <mxCell id="user" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#232F3D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.user;" vertex="1" parent="1">
          <mxGeometry x="200" y="680" width="78" height="78" as="geometry" />
        </mxCell>
        
        <mxCell id="user_label" value="Data Scientist" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="179" y="770" width="120" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow_user_ui" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#3333FF;dashed=1;" edge="1" parent="1" source="user" target="sagemaker_mlflow">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="400" y="719" />
              <mxPoint x="400" y="800" />
              <mxPoint x="859" y="800" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow_user_ui_label" value="MLflow UI&#xa;(Browser)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontStyle=1;fillColor=#dae8fc;" vertex="1" connectable="0" parent="arrow_user_ui">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint x="60" y="-15" as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend_box" value="Légende" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;verticalAlign=top;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="120" y="650" width="200" height="150" as="geometry" />
        </mxCell>
        
        <mxCell id="legend_1" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#000000;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="140" y="690" as="sourcePoint" />
            <mxPoint x="180" y="690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend_1_label" value="Exécution / Invocation" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="190" y="680" width="120" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend_2" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#d79b00;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="140" y="720" as="sourcePoint" />
            <mxPoint x="180" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend_2_label" value="MLflow Tracking" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="190" y="710" width="120" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend_3" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#01A88D;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="140" y="750" as="sourcePoint" />
            <mxPoint x="180" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend_3_label" value="API AWS Bedrock" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="190" y="740" width="120" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend_4" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#000000;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="140" y="780" as="sourcePoint" />
            <mxPoint x="180" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend_4_label" value="Dépendance / Usage" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="190" y="770" width="120" height="20" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
